<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bem-Estar Pet</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:20px; background:#ffe6f0; color:#333; }
  .hidden { display:none; }
  .card { background:#f5f5dc; padding:15px; border-radius:10px; margin-bottom:15px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  input, select, button { padding:8px; margin:4px 0; border-radius:5px; border:1px solid #ccc; }
  button { cursor:pointer; background:#ff6fa3; color:#fff; border:none; }
  .badge { padding:5px 10px; border-radius:5px; background:#e0e0e0; font-size:12px; }
</style>
</head>
<body>
<div id="loginCard" class="card">
  <h3>Cadastro do Usu√°rio e Pets</h3>
  <input id="userName" placeholder="Seu nome">
  <div id="petContainer">
    <div style="display:flex;gap:8px;margin-top:6px;">
      <input class="input petName" placeholder="Nome do pet" style="flex:1">
      <select class="petType">
        <option value="c√£o">C√£o</option>
        <option value="gato">Gato</option>
        <option value="outro">Outro</option>
      </select>
    </div>
  </div>
  <button onclick="addPetField()">Adicionar outro pet</button>
  <br>
  <button onclick="saveUser()">Salvar Cadastro</button>
</div>

<div id="mainContent" class="hidden">
  <div class="card">
    <h3>Check-in de Humor</h3>
    <select id="mood">
      <option>üòÉ Feliz</option>
      <option>üôÇ Neutro</option>
      <option>üòû Triste</option>
      <option>üò∞ Ansioso</option>
      <option>üò´ Estressado</option>
      <option>üò¥ Cansado</option>
    </select>
    <button onclick="saveMood()">Salvar Humor</button>
    <p id="moodStatus"></p>
  </div>

  <div class="card">
    <h3 id="scoreBadge">Pontos: 0</h3>
  </div>

  <div id="achievementsCard" class="card hidden">
    <h3>Suas Conquistas üèÜ</h3>
    <div id="achievementsContainer" style="display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;"></div>
  </div>

  <div class="card" id="petActivity"></div>
</div>

<div id="confetti" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;"></div>

<script>
const loginCard=document.getElementById('loginCard');
const mainContent=document.getElementById('mainContent');
const userNameInput=document.getElementById('userName');
const petContainer=document.getElementById('petContainer');
const scoreBadge=document.getElementById('scoreBadge');
const moodStatus=document.getElementById('moodStatus');
const petActivity=document.getElementById('petActivity');
const achievementsCard=document.getElementById('achievementsCard');
const achievementsContainer=document.getElementById('achievementsContainer');
const mood=document.getElementById('mood');

let user=null;
let score=0;
let petData=[];
let achievements={};
let activityLog=[];

const allAchievements={
  'primeiro-checkin':{name:'Primeiro Check-in',desc:'Registre seu primeiro humor!',icon:'‚ú®'},
  'humor-feliz':{name:'Feliz√£o!',desc:'Fa√ßa um check-in de humor Feliz.',icon:'ü•≥'},
  'pet-lover':{name:'Pet Lover',desc:'Complete uma atividade com seu pet.',icon:'‚ù§Ô∏è'}
};

function loadData(){
  const savedUser=localStorage.getItem('userName');
  const savedPets=localStorage.getItem('petData');
  const savedScore=localStorage.getItem('score');
  const savedAchievements=localStorage.getItem('achievements');
  const savedActivityLog=localStorage.getItem('activityLog');

  if(savedUser && savedPets){
    user=savedUser;
    petData=JSON.parse(savedPets);
    score=parseInt(savedScore)||0;
    achievements=JSON.parse(savedAchievements)||{};
    activityLog=JSON.parse(savedActivityLog)||[];

    loginCard.classList.add('hidden');
    mainContent.classList.remove('hidden');
    achievementsCard.classList.remove('hidden');
    scoreBadge.textContent=`Pontos: ${score}`;
    updateAchievementsDisplay();
    generatePetActivity();
  }
}

function updateAchievementsDisplay(){
  achievementsContainer.innerHTML='';
  for(const key in allAchievements){
    const achievement=allAchievements[key];
    const isUnlocked=achievements[key];
    const badge=document.createElement('div');
    badge.className='badge';
    badge.style.opacity=isUnlocked?'1':'0.4';
    badge.textContent=isUnlocked?`${achievement.icon} ${achievement.name}`:`${achievement.icon} ?`;
    badge.title=isUnlocked?achievement.desc:'Conquista Bloqueada';
    achievementsContainer.appendChild(badge);
  }
}

function unlockAchievement(key){
  if(!achievements[key]){
    achievements[key]=true;
    localStorage.setItem('achievements',JSON.stringify(achievements));
    alert(`Parab√©ns! Voc√™ desbloqueou a conquista: ${allAchievements[key].name}!`);
    updateAchievementsDisplay();
  }
}

function addPetField(){
  const newPetDiv=document.createElement('div');
  newPetDiv.style="display:flex;gap:8px;margin-top:6px;";
  newPetDiv.innerHTML=`
    <input class="input petName" placeholder="Nome do pet" style="flex:1">
    <select class="petType">
      <option value="c√£o">C√£o</option>
      <option value="gato">Gato</option>
      <option value="outro">Outro</option>
    </select>
  `;
  petContainer.appendChild(newPetDiv);
}

function saveUser(){
  const userName=userNameInput.value.trim();
  const petNames=document.querySelectorAll('.petName');
  const petTypes=document.querySelectorAll('.petType');
  
  if(!userName || !petNames[0].value.trim()){
    alert("Por favor, preencha seu nome e o nome do seu pet.");
    return;
  }

  user=userName;
  petData=[];
  for(let i=0;i<petNames.length;i++){
    if(petNames[i].value.trim()!==""){
      petData.push({name:petNames[i].value.trim(),type:petTypes[i].value});
    }
  }

  localStorage.setItem('userName',user);
  localStorage.setItem('petData',JSON.stringify(petData));
  
  loginCard.classList.add('hidden');
  mainContent.classList.remove('hidden');
  achievementsCard.classList.remove('hidden');
  alert(`Bem-vindo(a), ${user}! Seu cadastro foi salvo.`);
  generatePetActivity();
}

function saveMood(){
  const selectedMood=mood.value;
  const moodPoints={"üòÉ Feliz":20,"üôÇ Neutro":10,"üòû Triste":5,"üò∞ Ansioso":5,"üò´ Estressado":5,"üò¥ Cansado":5};
  score+=moodPoints[selectedMood]||0;
  localStorage.setItem('score',score);
  scoreBadge.textContent=`Pontos: ${score}`;
  moodStatus.textContent=`Humor salvo: ${selectedMood}. Voc√™ ganhou ${moodPoints[selectedMood]||0} pontos!`;
  
  if(selectedMood==="üòÉ Feliz"){ triggerConfetti(); unlockAchievement('humor-feliz'); }
  unlockAchievement('primeiro-checkin');
  updateActivityLog('check-in',selectedMood);
}

function generatePetActivity(){
  if(petData.length>0){
    let activityMessage="Lembre-se de fazer algo por seus pets hoje! ";
    petData.forEach(pet=>{
      const activities={
        c√£o:["ir passear üêæ","brincar de bolinha üéæ","dar um petisco ü¶¥","fazer carinho na barriga ‚ù§Ô∏è"],
        gato:["usar a varinha üé£","dar uma nova caixa de papel√£o üì¶","escovar o pelo üêà","dar um sach√™ üêü"],
        outro:["verificar se a √°gua est√° fresca","brincar com o brinquedo favorito","dar a comida preferida"]
      };
      const petActivities=activities[pet.type]||activities.outro;
      const randomActivity=petActivities[Math.floor(Math.random()*petActivities.length)];
      activityMessage+=`<br>Seu pet <b>${pet.name}</b> gostaria de <b>${randomActivity}</b>. 
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" style="background:#4CAF50;font-size:12px;" onclick="logActivity('${randomActivity}')">Marcar como feito (+25 pts)</button>
        </div>`;
    });
    petActivity.innerHTML=activityMessage;
  }
}

function logActivity(activity){
  score+=25;
  localStorage.setItem('score',score);
  scoreBadge.textContent=`Pontos: ${score}`;
  unlockAchievement('pet-lover');
  updateActivityLog('pet-activity',activity);
}

function updateActivityLog(type,details){
  activityLog.push({type,details,date:new Date().toISOString()});
  localStorage.setItem('activityLog',JSON.stringify(activityLog));
}

function triggerConfetti(){
  const confetti=document.getElementById('confetti');
  confetti.innerHTML='';
  for(let i=0;i<50;i++){
    const piece=document.createElement('div');
    piece.style=`position:absolute;width:10px;height:10px;background:hsl(${Math.random()*360},100%,50%);left:${Math.random()*100}%;top:${Math.random()*-20}%;transform:rotate(${Math.random()*360}deg);animation:fall-${i} ${3+Math.random()*2}s ease-in-out forwards;`;
    confetti.appendChild(piece);
    const styleSheet=document.createElement("style");
    styleSheet.innerHTML=`@keyframes fall-${i}{0%{transform:translate(0,0) rotate(0deg);opacity:1;}100%{transform:translate(${Math.random()*200-100}px,100vh) rotate(${720+Math.random()*360}deg);opacity:0;}}`;
    document.head.appendChild(styleSheet);
  }
}

window.onload=loadData;
</script>
</body>
</html>
